# FrankenFS Hotspot Profile â€” 20260219

## Scope

This profile closes `PLAN_TO_PORT_FRANKENFS_TO_RUST.md` item 0.8 line 89
("Profile hotspots only after correctness fixtures exist").

## Correctness Fixture Gate

Verified fixture gate before profiling:

```bash
target/release/ffs-harness check-fixtures
```

Result:

- `ext4: block_size=4096 volume=frankenfs`
- `btrfs: nodesize=16384 label=ffs-lab`

## Data Source and Method

- Source artifact: `artifacts/baselines/perf_baseline-20260219.json`
- Method: rank `measurements[]` with `status == "measured"` by descending
  `p95_us`

## Top Hotspots (by p95)

| Rank | Operation | p95 (ms) | Command |
|---:|---|---:|---|
| 1 | `block_cache_s3fifo_zipf_distribution` | 67602.698 | `rch exec -- cargo bench -p ffs-block --features s3fifo --bench arc_cache -- block_cache_s3fifo_zipf_distribution` |
| 2 | `block_cache_arc_compile_like` | 66789.028 | `rch exec -- cargo bench -p ffs-block --bench arc_cache -- block_cache_arc_compile_like` |
| 3 | `block_cache_s3fifo_mixed_seq70_hot30` | 64990.080 | `rch exec -- cargo bench -p ffs-block --features s3fifo --bench arc_cache -- block_cache_s3fifo_mixed_seq70_hot30` |
| 4 | `block_cache_s3fifo_sequential_scan` | 63906.947 | `rch exec -- cargo bench -p ffs-block --features s3fifo --bench arc_cache -- block_cache_s3fifo_sequential_scan` |
| 5 | `block_cache_arc_database_like` | 63878.176 | `rch exec -- cargo bench -p ffs-block --bench arc_cache -- block_cache_arc_database_like` |

## Observations

- Current dominant hotspots are all `ffs-block` criterion cache workloads.
- Metadata CLI paths are orders of magnitude lower latency (`inspect` p95
  `3.068ms`, `scrub` p95 `44.041ms`).
- Next optimization cycle should prioritize `ffs-block` cache workload internals,
  one lever per commit, with baseline equivalence checks after each change.
